{"version":3,"sources":["meteor://ðŸ’»app/packages/react-meteor-data/index.js","meteor://ðŸ’»app/packages/react-meteor-data/useFind.ts","meteor://ðŸ’»app/packages/react-meteor-data/useSubscribe.ts","meteor://ðŸ’»app/packages/react-meteor-data/useTracker.ts","meteor://ðŸ’»app/packages/react-meteor-data/withTracker.tsx"],"names":["React","module","link","v","useTracker","withTracker","useFind","useSubscribe","Meteor","isDevelopment","version","split","console","warn","default","_typeof","_slicedToArray","_toConsumableArray","export","Mongo","useReducer","useMemo","useEffect","useRef","Tracker","useFindReducer","data","action","type","slice","atIndex","document","doc","fromIndex","copy","splice","toIndex","checkCursor","cursor","undefined","Cursor","_mongo","_cursorDescription","fetchData","observer","observe","addedAt","before","stop","useFindClient","factory","deps","nonreactive","dispatch","didMount","current","changedAt","newDocument","oldDocument","removedAt","movedTo","_suppress_initial","useFindServer","fetch","isServer","useFindDev","expects","pos","arg","Array","isArray","exportDefault","useSubscribeClient","name","args","updateOnReady","subscription","isReady","subscribe","ready","useSubscribeServer","shouldWarn","Package","mongo","Object","getPrototypeOf","prototype","keys","forEach","key","fur","x","useForceUpdate","useTrackerNoDeps","reactiveFn","skipUpdate","isMounted","trackerData","refs","forceUpdate","computation","autorun","c","firstRun","defer","useTrackerWithDeps","comp","useTrackerClient","useTrackerServer","_useTracker","useTrackerDev","_extends","forwardRef","memo","options","Component","getMeteorData","WithTracker","props","ref","pure"],"mappings":"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","file":"/packages/react-meteor-data.js","sourcesContent":["/* global Meteor*/\nimport React from 'react';\n\nif (Meteor.isDevelopment) {\n  const v = React.version.split('.');\n  if (v[0] < 16 || (v[0] == 16 && v[1] < 8)) {\n    console.warn('react-meteor-data 2.x requires React version >= 16.8.');\n  }\n}\n\nexport { useTracker } from './useTracker';\nexport { withTracker } from './withTracker.tsx';\nexport { useFind } from './useFind';\nexport { useSubscribe } from './useSubscribe';","import { Meteor } from 'meteor/meteor'\nimport { Mongo } from 'meteor/mongo'\nimport { useReducer, useMemo, useEffect, Reducer, DependencyList, useRef } from 'react'\nimport { Tracker } from 'meteor/tracker'\n\ntype useFindActions<T> =\n  | { type: 'refresh', data: T[] }\n  | { type: 'addedAt', document: T, atIndex: number }\n  | { type: 'changedAt', document: T, atIndex: number }\n  | { type: 'removedAt', atIndex: number }\n  | { type: 'movedTo', fromIndex: number, toIndex: number }\n\nconst useFindReducer = <T>(data: T[], action: useFindActions<T>): T[] => {\n  switch (action.type) {\n    case 'refresh':\n      return action.data\n    case 'addedAt':\n      return [\n        ...data.slice(0, action.atIndex),\n        action.document,\n        ...data.slice(action.atIndex)\n      ]\n    case 'changedAt':\n      return [\n        ...data.slice(0, action.atIndex),\n        action.document,\n        ...data.slice(action.atIndex + 1)\n      ]\n    case 'removedAt':\n      return [\n        ...data.slice(0, action.atIndex),\n        ...data.slice(action.atIndex + 1)\n      ]\n    case 'movedTo':\n      const doc = data[action.fromIndex]\n      const copy = [\n        ...data.slice(0, action.fromIndex),\n        ...data.slice(action.fromIndex + 1)\n      ]\n      copy.splice(action.toIndex, 0, doc)\n      return copy\n  }\n}\n\n// Check for valid Cursor or null.\n// On client, we should have a Mongo.Cursor (defined in\n// https://github.com/meteor/meteor/blob/devel/packages/minimongo/cursor.js and\n// https://github.com/meteor/meteor/blob/devel/packages/mongo/collection.js).\n// On server, however, we instead get a private Cursor type from\n// https://github.com/meteor/meteor/blob/devel/packages/mongo/mongo_driver.js\n// which has fields _mongo and _cursorDescription.\nconst checkCursor = <T>(cursor: Mongo.Cursor<T> | Partial<{ _mongo: any, _cursorDescription: any }> | undefined | null) => {\n  if (cursor !== null && cursor !== undefined && !(cursor instanceof Mongo.Cursor) &&\n      !(cursor._mongo && cursor._cursorDescription)) {\n    console.warn(\n      'Warning: useFind requires an instance of Mongo.Cursor. '\n      + 'Make sure you do NOT call .fetch() on your cursor.'\n    );\n  }\n}\n\n// Synchronous data fetch. It uses cursor observing instead of cursor.fetch() because synchronous fetch will be deprecated.\nconst fetchData = <T>(cursor: Mongo.Cursor<T>) => {\n  const data: T[] = []\n  const observer = cursor.observe({\n    addedAt (document, atIndex, before) {\n      data.splice(atIndex, 0, document)\n    },\n  })\n  observer.stop()\n  return data\n}\n\nconst useFindClient = <T = any>(factory: () => (Mongo.Cursor<T> | undefined | null), deps: DependencyList = []) => {\n  const cursor = useMemo(() => {\n    // To avoid creating side effects in render, opt out\n    // of Tracker integration altogether.\n    const cursor = Tracker.nonreactive(factory);\n    if (Meteor.isDevelopment) {\n      checkCursor(cursor)\n    }\n    return cursor\n  }, deps)\n\n  const [data, dispatch] = useReducer<Reducer<T[], useFindActions<T>>, null>(\n    useFindReducer,\n    null,\n    () => {\n      if (!(cursor instanceof Mongo.Cursor)) {\n        return []\n      }\n\n      return fetchData(cursor)\n    }\n  )\n\n  // Store information about mounting the component.\n  // It will be used to run code only if the component is updated.\n  const didMount = useRef(false)\n\n  useEffect(() => {\n    // Fetch intitial data if cursor was changed.\n    if (didMount.current) {\n      if (!(cursor instanceof Mongo.Cursor)) {\n        return\n      }\n\n      const data = fetchData(cursor)\n      dispatch({ type: 'refresh', data })\n    } else {\n      didMount.current = true\n    }\n\n    if (!(cursor instanceof Mongo.Cursor)) {\n      return\n    }\n\n    const observer = cursor.observe({\n      addedAt (document, atIndex, before) {\n        dispatch({ type: 'addedAt', document, atIndex })\n      },\n      changedAt (newDocument, oldDocument, atIndex) {\n        dispatch({ type: 'changedAt', document: newDocument, atIndex })\n      },\n      removedAt (oldDocument, atIndex) {\n        dispatch({ type: 'removedAt', atIndex })\n      },\n      movedTo (document, fromIndex, toIndex, before) {\n        dispatch({ type: 'movedTo', fromIndex, toIndex })\n      },\n      // @ts-ignore\n      _suppress_initial: true\n    })\n\n    return () => {\n      observer.stop()\n    }\n  }, [cursor])\n\n  return cursor ? data : cursor\n}\n\nconst useFindServer = <T = any>(factory: () => Mongo.Cursor<T> | undefined | null, deps: DependencyList) => (\n  Tracker.nonreactive(() => {\n    const cursor = factory()\n    if (Meteor.isDevelopment) checkCursor(cursor)\n    return cursor?.fetch?.() ?? null\n  })\n)\n\nexport const useFind = Meteor.isServer\n  ? useFindServer\n  : useFindClient\n\nfunction useFindDev <T = any>(factory: () => (Mongo.Cursor<T> | undefined | null), deps: DependencyList = []) {\n  function warn (expects: string, pos: string, arg: string, type: string) {\n    console.warn(\n      `Warning: useFind expected a ${expects} in it\\'s ${pos} argument `\n        + `(${arg}), but got type of \\`${type}\\`.`\n    );\n  }\n\n  if (typeof factory !== 'function') {\n    warn(\"function\", \"1st\", \"reactiveFn\", factory);\n  }\n\n  if (!deps || !Array.isArray(deps)) {\n    warn(\"array\", \"2nd\", \"deps\", typeof deps);\n  }\n\n  return useFind(factory, deps);\n}\n\nexport default Meteor.isDevelopment\n  ? useFindDev\n  : useFind;\n","import { Meteor } from 'meteor/meteor'\nimport { useTracker } from './useTracker'\n\nconst useSubscribeClient = (name?: string, ...args: any[]): () => boolean => {\n  let updateOnReady = false\n  let subscription: Meteor.SubscriptionHandle\n\n  const isReady = useTracker(() => {\n    if (!name) return true\n\n    subscription = Meteor.subscribe(name, ...args)\n\n    return subscription.ready()\n  }, () => (!updateOnReady))\n\n  return () => {\n    updateOnReady = true\n    return !isReady\n  }\n}\n\nconst useSubscribeServer = (name?: string, ...args: any[]): () => boolean => (\n  () => false\n)\n\nexport const useSubscribe = Meteor.isServer\n  ? useSubscribeServer\n  : useSubscribeClient\n","declare var Package: any\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { useReducer, useEffect, useRef, useMemo, DependencyList } from 'react';\n\n// Warns if data is a Mongo.Cursor or a POJO containing a Mongo.Cursor.\nfunction checkCursor (data: any): void {\n  let shouldWarn = false;\n  if (Package.mongo && Package.mongo.Mongo && data && typeof data === 'object') {\n    if (data instanceof Package.mongo.Mongo.Cursor) {\n      shouldWarn = true;\n    } else if (Object.getPrototypeOf(data) === Object.prototype) {\n      Object.keys(data).forEach((key) => {\n        if (data[key] instanceof Package.mongo.Mongo.Cursor) {\n          shouldWarn = true;\n        }\n      });\n    }\n  }\n  if (shouldWarn) {\n    console.warn(\n      'Warning: your reactive function is returning a Mongo cursor. '\n      + 'This value will not be reactive. You probably want to call '\n      + '`.fetch()` on the cursor before returning it.'\n    );\n  }\n}\n\n// Used to create a forceUpdate from useReducer. Forces update by\n// incrementing a number whenever the dispatch method is invoked.\nconst fur = (x: number): number => x + 1;\nconst useForceUpdate = () => useReducer(fur, 0)[1];\n\nexport interface IReactiveFn<T> {\n  (c?: Tracker.Computation): T\n}\n\nexport interface ISkipUpdate<T> {\n  <T>(prev: T, next: T): boolean\n}\n\ntype TrackerRefs = {\n  computation?: Tracker.Computation;\n  isMounted: boolean;\n  trackerData: any;\n}\n\nconst useTrackerNoDeps = <T = any>(reactiveFn: IReactiveFn<T>, skipUpdate: ISkipUpdate<T> = null) => {\n  const { current: refs } = useRef<TrackerRefs>({\n    isMounted: false,\n    trackerData: null\n  });\n  const forceUpdate = useForceUpdate();\n\n  // Without deps, always dispose and recreate the computation with every render.\n  if (refs.computation) {\n    refs.computation.stop();\n    // @ts-ignore This makes TS think ref.computation is \"never\" set\n    delete refs.computation;\n  }\n\n  // Use Tracker.nonreactive in case we are inside a Tracker Computation.\n  // This can happen if someone calls `ReactDOM.render` inside a Computation.\n  // In that case, we want to opt out of the normal behavior of nested\n  // Computations, where if the outer one is invalidated or stopped,\n  // it stops the inner one.\n  Tracker.nonreactive(() => Tracker.autorun((c: Tracker.Computation) => {\n    refs.computation = c;\n    const data = reactiveFn(c);\n    if (c.firstRun) {\n      // Always run the reactiveFn on firstRun\n      refs.trackerData = data;\n    } else if (!skipUpdate || !skipUpdate(refs.trackerData, data)) {\n      // For any reactive change, forceUpdate and let the next render rebuild the computation.\n      forceUpdate();\n    }\n  }));\n\n  // To clean up side effects in render, stop the computation immediately\n  if (!refs.isMounted) {\n    Meteor.defer(() => {\n      if (!refs.isMounted && refs.computation) {\n        refs.computation.stop();\n        delete refs.computation;\n      }\n    });\n  }\n\n  useEffect(() => {\n    // Let subsequent renders know we are mounted (render is committed).\n    refs.isMounted = true;\n\n    // In some cases, the useEffect hook will run before Meteor.defer, such as\n    // when React.lazy is used. In those cases, we might as well leave the\n    // computation alone!\n    if (!refs.computation) {\n      // Render is committed, but we no longer have a computation. Invoke\n      // forceUpdate and let the next render recreate the computation.\n      if (!skipUpdate) {\n        forceUpdate();\n      } else {\n        Tracker.nonreactive(() => Tracker.autorun((c: Tracker.Computation) => {\n          const data = reactiveFn(c);\n          refs.computation = c;\n          if (!skipUpdate(refs.trackerData, data)) {\n            // For any reactive change, forceUpdate and let the next render rebuild the computation.\n            forceUpdate();\n          }\n        }));\n      }\n    }\n\n    // stop the computation on unmount\n    return () =>{\n      refs.computation?.stop();\n      delete refs.computation;\n      refs.isMounted = false;\n    }\n  }, []);\n\n  return refs.trackerData;\n}\n\nconst useTrackerWithDeps = <T = any>(reactiveFn: IReactiveFn<T>, deps: DependencyList, skipUpdate: ISkipUpdate<T> = null): T => {\n  const forceUpdate = useForceUpdate();\n\n  const { current: refs } = useRef<{\n    reactiveFn: IReactiveFn<T>;\n    data?: T;\n    comp?: Tracker.Computation;\n    isMounted?: boolean;\n  }>({ reactiveFn });\n\n  // keep reactiveFn ref fresh\n  refs.reactiveFn = reactiveFn;\n\n  useMemo(() => {\n    // To jive with the lifecycle interplay between Tracker/Subscribe, run the\n    // reactive function in a computation, then stop it, to force flush cycle.\n    const comp = Tracker.nonreactive(\n      () => Tracker.autorun((c: Tracker.Computation) => {\n        const data = refs.reactiveFn();\n        if (c.firstRun) {\n          refs.data = data;\n        } else if (!skipUpdate || !skipUpdate(refs.data, data)) {\n          refs.data = data;\n          forceUpdate();\n        }\n      })\n    );\n\n    // Stop the computation immediately to avoid creating side effects in render.\n    // refers to this issues:\n    // https://github.com/meteor/react-packages/issues/382\n    // https://github.com/meteor/react-packages/issues/381\n    if (refs.comp) refs.comp.stop();\n\n    // In some cases, the useEffect hook will run before Meteor.defer, such as\n    // when React.lazy is used. This will allow it to be stopped earlier in\n    // useEffect if needed.\n    refs.comp = comp;\n    // To avoid creating side effects in render, stop the computation immediately\n    Meteor.defer(() => {\n      if (!refs.isMounted && refs.comp) {\n        refs.comp.stop();\n        delete refs.comp;\n      }\n    });\n  }, deps);\n\n  useEffect(() => {\n    // Let subsequent renders know we are mounted (render is committed).\n    refs.isMounted = true;\n\n    if (!refs.comp) {\n      refs.comp = Tracker.nonreactive(\n        () => Tracker.autorun((c) => {\n          const data: T = refs.reactiveFn(c);\n          if (!skipUpdate || !skipUpdate(refs.data, data)) {\n            refs.data = data;\n            forceUpdate();\n          }\n        })\n      );\n    }\n\n    return () => {\n      refs.comp.stop();\n      delete refs.comp;\n      refs.isMounted = false;\n    };\n  }, deps);\n\n  return refs.data as T;\n};\n\nfunction useTrackerClient <T = any>(reactiveFn: IReactiveFn<T>, skipUpdate?: ISkipUpdate<T>): T;\nfunction useTrackerClient <T = any>(reactiveFn: IReactiveFn<T>, deps?: DependencyList, skipUpdate?: ISkipUpdate<T>): T;\nfunction useTrackerClient <T = any>(reactiveFn: IReactiveFn<T>, deps: DependencyList | ISkipUpdate<T> = null, skipUpdate: ISkipUpdate<T> = null): T {\n  if (deps === null || deps === undefined || !Array.isArray(deps)) {\n    if (typeof deps === \"function\") {\n      skipUpdate = deps;\n    }\n    return useTrackerNoDeps(reactiveFn, skipUpdate);\n  } else {\n    return useTrackerWithDeps(reactiveFn, deps, skipUpdate);\n  }\n}\n\nconst useTrackerServer: typeof useTrackerClient = (reactiveFn) => {\n  return Tracker.nonreactive(reactiveFn);\n}\n\n// When rendering on the server, we don't want to use the Tracker.\n// We only do the first rendering on the server so we can get the data right away\nconst _useTracker = Meteor.isServer\n  ? useTrackerServer\n  : useTrackerClient;\n\nfunction useTrackerDev (reactiveFn, deps = null, skipUpdate = null) {\n  function warn (expects: string, pos: string, arg: string, type: string) {\n    console.warn(\n      `Warning: useTracker expected a ${expects} in it\\'s ${pos} argument `\n        + `(${arg}), but got type of \\`${type}\\`.`\n    );\n  }\n\n  if (typeof reactiveFn !== 'function') {\n    warn(\"function\", \"1st\", \"reactiveFn\", reactiveFn);\n  }\n\n  if (deps && skipUpdate && !Array.isArray(deps) && typeof skipUpdate === \"function\") {\n    warn(\"array & function\", \"2nd and 3rd\", \"deps, skipUpdate\",\n      `${typeof deps} & ${typeof skipUpdate}`);\n  } else {\n    if (deps && !Array.isArray(deps) && typeof deps !== \"function\") {\n      warn(\"array or function\", \"2nd\", \"deps or skipUpdate\", typeof deps);\n    }\n    if (skipUpdate && typeof skipUpdate !== \"function\") {\n      warn(\"function\", \"3rd\", \"skipUpdate\", typeof skipUpdate);\n    }\n  }\n\n  const data = _useTracker(reactiveFn, deps, skipUpdate);\n  checkCursor(data);\n  return data;\n}\n\nexport const useTracker = Meteor.isDevelopment\n  ? useTrackerDev as typeof useTrackerClient\n  : _useTracker;\n","import React, { forwardRef, memo } from 'react';\nimport { useTracker } from './useTracker';\n\ntype ReactiveFn = (props: object) => any;\ntype ReactiveOptions = {\n  getMeteorData: ReactiveFn;\n  pure?: boolean;\n  skipUpdate?: (prev: any, next: any) => boolean;\n}\n\nexport const withTracker = (options: ReactiveFn | ReactiveOptions) => {\n  return (Component: React.ComponentType) => {\n    const getMeteorData = typeof options === 'function'\n      ? options\n      : options.getMeteorData;\n\n    const WithTracker = forwardRef((props, ref) => {\n      const data = useTracker(\n        () => getMeteorData(props) || {},\n        (options as ReactiveOptions).skipUpdate\n      );\n      return (\n        <Component ref={ref} {...props} {...data} />\n      );\n    });\n\n    const { pure = true } = options as ReactiveOptions;\n    return pure ? memo(WithTracker) : WithTracker;\n  };\n}\n"]}